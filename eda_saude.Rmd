---
title: "Exploratory Data Analysis Dados Saúde 2018 Bruno Zamberlan"
output: html_notebook
---
**Contexto:**
O objetivo é demonstrar as práticas de EDA de Tukey aplicados aos dados sobre minha saúde coletados no ano de 2018. Acesse o link para uma [Visão Geral EDA](https://pt.wikipedia.org/wiki/An%C3%A1lise_explorat%C3%B3ria_de_dados). Além disso, recomendo [Aplicando os conceitos de EDA com Python](https://towardsdatascience.com/exploratory-data-analysis-8fc1cb20fd15) 

**Objetivo:**
Explorar dados sobre minha saúde em 2018 visando melhorar meus hábitos para 2019

**Problema:**
Variáveis: 
*Peso ao final da semana* e 
*Quantidade de sessões de exercícios na semana*.
Para fins didáticos, considerei o ano com 51 semanas completas. São 51 observações que representam as semanas do ano de 2018. 



*Antes de iniciar, dividi o problema em 4 partes*

#### PASSO-A-PASSO
##### 1) Importar
##### 2) Limpar
##### 3) Explorar (AQUI QUE FOCAMOS NAS TÉCNICAS DE E.D.A)
##### 4) Gerar Insights

## Passo 1: IMPORTAR

Procurei deixar os dados mais próximos de serem trabalhados utilizando excel e salvando os dados no formato .CSV 



```{r}
saude_2018 <- read.csv(file.choose(), header = T, sep = ";")
```

### Para facilitar a localização do arquivo e não precisar digitar o caminho completo, utilize a opção **file.choose()**. Se preferir, é só colocar a localização do arquivo como parâmetro inicial

### Após a importação, utilizo o comando **head()** para verificar como ficou a estrutura do arquivo

``` {r}
head(saude_2018)
```

## Passo 2: LIMPAR

Como é possível visualizar, nos deparamos com 3 pontos de atenção:
1) Necessidade de substituir a vírgula por ponto
2) Ajuste dos nomes das variáveis

### Sugiro começar pelo ajuste do nome das variáveis. Nesse caso, vou utilizar o **colnames()** passando um vetor com os dois nomes de variáveis que quero utilizar **$peso** E **$qtde_exerc**

``` {r}
colnames(saude_2018) <- c("peso", "qtde_exerc")
```

### Para verificar a efetividade, utilizo novamente o **head()**

``` {r}
head(saude_2018)
```

### Para substituir valores com ponto para vírgula, utilizo o comando **sub()** conforme abaixo

``` {r}
saude_2018$peso <- sub(",", ".", saude_2018$peso)
```

## Obs: Se você executar somente o **sub(",", ".", saude_2018$peso)** você terá o resultado na tela, mas a atribuição do resultado na variável não ocorrerá. Por isso, é utilizado o símbolo ** <- **

### Para verificar a efetividade da substituição, utilizo novamente o comando **head()**

``` {r}
head(saude_2018)
```

Por fim, utilizo o comando **str()** para verificar como ficaram os tipos de dados

``` {r}
str(saude_2018)
```

### Verificando a estrutura, percebemos que será necessário converter o tipo da variável **$peso** para **double** visto que temos um número com vírgula

``` {r}
saude_2018$peso <- as.double(saude_2018$peso)
```

``` {r}
head(saude_2018)
```

### Para facilitar a análise, nomearei as linhas também seguindo uma sequência lógica semana1, semana2

``` {r}
semanas <- paste("semana", c(1:51))
rownames(saude_2018) <- semanas
head(saude_2018)

```

## A partir desse momento, o dataframe está pronto para ser utilizado!!!


### Para ter uma visão geral dos dados, utilizarei o comando **summary()**

```{r}
summary(saude_2018$peso)
```


```{r}
summary(saude_2018$qtde_exerc)
```

## Passo 3: Explorar

### Para ter uma visão dos dados, podemos enfatizar nossa análise em 3 aspectos

### **1) Localização dos dados:** Tentar localizar um valor que represente a variável explorada
### **2) Variabilidade dos dados:** Refere-se a dispersão dos dados identificando o que é variabilidade como "obra do ocaso" e o que tem uma fonte real de variação
### **3) Distribuição dos dados:** Combina os 2 aspectos explorados anteriormente de forma visual

### Localização de dados: Recomendo utilizar 3 medidas: Média, Média Ajustada e Mediana. 

Dica: Utilizar a média como "representante" dos seus dados pode esconder os outliers (valores extremos). Por isso, recomendo comparar as 3 medidas, veja só:

```{r}
paste("A média da variável peso é", mean(saude_2018$peso))
paste("A média ajustada da variável peso é", mean(saude_2018$peso, trim = 0.1))
paste("A mediana da variável é", median(saude_2018$peso))
```

## Observar que para fazer a média ajustada, utilizei o parâmetro **trim** que remove os 10%(0.1) extremos!!!

```{r}
paste("A média da variável quantidade de exercícios físicos é", mean(saude_2018$qtde_exerc))
paste("A média ajustada da variável quantidade de exercícios físicos é", mean(saude_2018$qtde_exerc, trim = 0.1))
paste("A mediana da variável quantidade de exercícios físicos é", median(saude_2018$qtde_exerc))
```



### Variabilidade: Recomendo utilizar 2 medidas: desvio padrão e quartis (não sensíveis aos outilers)

```{r}
paste("O desvio padrão para a variável peso é", sd(saude_2018$peso))
print("Os 4 principais quartis da distribuição da variável peso são:")
quantile(saude_2018$peso)
```

## Os quartis para a variável peso significam, basicamente, as 4 faixas em que o meu peso variou durante o ano.

```{r}
paste("O desvio padrão para a variável quantidade de exercícios é", sd(saude_2018$qtde_exerc))
print("Os 4 principais quartis da distribuição da variável quantidade de exercícios é:")
quantile(saude_2018$qtde_exerc)
```

## Os quartis no caso da quantidade de exercício físico representam o número de vezes por semana em que consegui fazer exercícios físicos. Reparem que variou de 1 a 5 com valores intermediários "2.5". Para corrigir isso, podemos tentar separar a distribuição em quartis diferentes (ao invés de 25% em 25%, podemos tentar 30%, 60%, 90%)

```{r}
quantile(saude_2018$qtde_exerc, p = c(0.1, 0.30, .60, 0.96))
```

## No caso, os quartis ficaram mais adequados a realidade: é razoável dizer que, quando realizei exercícios físicos na semana, variou numa frequência de 1 a 4 vezes. O Quartil 10% mostra que em algumas semanas eu não fiz nenhum exercício físico. 

### Distribuição dos dados: Recomendo analisar os histogramas e os boxplots

## Boxplots

```{r}
par(mfrow=c(1,2))
boxplot(saude_2018$peso, ylab = "Peso (Kg)")
boxplot(saude_2018$qtde_exerc, ylab = "Qtde exercícios por semana")
```
### Visualizando os Boxplots, eu poderia tirar algumas conclusões:
### 1) O peso variou numa faixa entre 85kg a 88,5kg. Como outlier, atingi 84,5kg e cheguei até 94,5kg
### 2) A quantidade de exercícios variou entre 1 e "2.5" (nesse caso, poderia arredondar para 3). Seria razoável dizer que na maioria das semanas consegui fazer 2 exercícios físicos (dado pela linha traçada na mediana)


## Histogramas: São um pouco mais sofisticados, pois necessitam algumas configurações. Utilizei o **seq()** para criar a sequência no range de valores das variáveis quebrando em 8 partes. Assim, consigo utilizar essa quebra com o parâmetro *break* 

```{r}
par(mfrow = c(1,2))
quebras_peso <- seq(from=min(saude_2018$peso), to=max(saude_2018$peso), length=8)
quebras_qtde_exerc <- seq(from=min(saude_2018$qtde_exerc, to=max(saude_2018$qtde_exerc)), length=8)
hist(saude_2018$peso, xlab = "Peso (Kg)", main = "Histograma peso em 2018", breaks = quebras_peso)
hist(saude_2018$qtde_exerc, main = "Histograma exercícios em 2018", xlab = "Qtde exercícios por semana", breaks = quebras_qtde_exerc)
```

### Visualizando os histogramas, eu poderia tirar algumas conclusões:
###1) Na maioria das semanas (aprox. 20), mantive o peso entre 84 e 86kg
###2) Em 20 das 51 semanas, fiz pelo menos 1 exercício físico
###3) Em 10 semanas, consegui fazer 3 exercícios físicos


## Passo 5: GERAR INSIGHTS

```{r echo=FALSE}
par(mfrow=c(2,2))
boxplot(saude_2018$peso, ylab = "Peso (Kg)", main="Boxplot peso em 2018")
hist(saude_2018$peso, xlab = "Peso (Kg)", main = "Histograma peso em 2018", breaks = quebras_peso)
boxplot(saude_2018$qtde_exerc, main = "Boxplot exercícos 2018", ylab = "Qtde exercícios por semana")
hist(saude_2018$qtde_exerc, main = "Histograma exercícios em 2018", xlab = "Qtde exercícios por semana", breaks = quebras_qtde_exerc)
```
##Insights:
# Meu peso em 2018
### * O peso se manteve na maioria do ano entre 85kg e 89kg
### * Os outliers foram 94,5kg como superior e 84,5kg como inferior
### * Em + de 15 semanas (cerca de 36% do ano), o peso ficou entre 84kg e 86kg o que demonstra que foi a menor faixa de peso que consegui manter durante o ano

# Meus hábitos de exercícios físicos em 2018
### * Na maioria das semanas, consegui fazer exercício físico entre 1 e 2 vezes
### * Em 2 semanas, consegui fazer 5x exercício físico (outlier superior)
### * Tive alguma(s) semana(s) onde não fiz exercício físico (outlier inferior zero): **Não é possível confirmar se foi em 1 ou mais visto que o histograma contabiliza a faixa de frequência entre 0 a 1**
### Em pelo menos 10 semanas (cerca de 20% do ano), consegui fazer exercício físico 3x
### * Em alguma semana, consegui fazer 4x exercício físico 



